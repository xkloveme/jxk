<!DOCTYPE html>
<html lang="en">
    <head>
        
        <meta charset="utf-8" />
        <title>å°åº·å‡½æ•°æ–‡æ¡£</title>
        
        
        <meta property="og:title" content="" />
        <meta property="og:type" content="website" />
        <meta property="og:image" content="https://static.yicode.tech/logo/yidash2.png" />
        
        <meta property="og:url" content="" />
        
        <script src="scripts/prettify/prettify.js"></script>
        <script src="scripts/prettify/lang-css.js"></script>
        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link type="text/css" rel="stylesheet" href="styles/prettify.css" />
        <link type="text/css" rel="stylesheet" href="styles/jsdoc.css" />
        <script src="scripts/nav.js" defer></script>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <style>
          .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            border-color: #3aa21c;
            background-color: #fff;
            color: #0a0f0b;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            }
        </style>
    </head>
    <body>
        <button class="back-to-top" onclick="scrollToTop()">è¿”å›é¡¶éƒ¨ğŸ”</button>
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger" class="navicon-button x">
            <div class="navicon"></div>
        </label>

        <label for="nav-trigger" class="overlay"></label>

        <nav >
            
            <input type="text" id="nav-search" placeholder="æœç´¢" />
            
            
            <h2><a href="index.html">ä¸»é¡µ</a></h2><h2><a href="https://github.com/xkloveme/jxk" target="_blank" class="menu-item" id="repository" >Github</a></h2><h3>åœ°å€</h3><ul><li><a href="global.html#jxk_address_areaMatch">jxk_address_areaMatch</a></li></ul><h3>åˆ¤æ–­æ˜¯å¦</h3><ul><li><a href="global.html#is_array">is_array</a></li><li><a href="global.html#is_boolean">is_boolean</a></li><li><a href="global.html#is_number">is_number</a></li><li><a href="global.html#yd_is_chinese">yd_is_chinese</a></li></ul><h3>æ‚é¡¹</h3><ul><li><a href="global.html#xxx">xxx</a></li></ul><h3>æ­£åˆ™è¡¨è¾¾å¼</h3><ul><li><a href="global.html#reg_businessLicense">reg_businessLicense</a></li><li><a href="global.html#reg_licencePlateNumber">reg_licencePlateNumber</a></li><li><a href="global.html#reg_regexp">reg_regexp</a></li></ul><h3>åŠ è§£å¯†å‡½æ•°</h3><ul><li><a href="global.html#sm2">sm2</a></li><li><a href="global.html#sm3">sm3</a></li><li><a href="global.html#sm4">sm4</a><ul class='methods'><li data-type='method' style='display: none;'><a href="global.html#sm4#.decrypt">decrypt</a></li><li data-type='method' style='display: none;'><a href="global.html#sm4#.encrypt">encrypt</a></li></ul></li></ul><h3><a href="global.html">Global</a></h3>
            
        </nav>

        <div id="main">
            
            <h1 class="page-title">sm/2.js</h1>
            

            




<section>
    <article>
        <pre class="prettyprint source linenums"><code>import { SM2 } from "../../utils/sm2";
/**
 * SM2 å›½å¯†ç®—æ³•
 * @category sm
 * @alias sm2
 * @example
 * import {sm2} from "jxk";
 let keypair = sm2.generateKeyPairHex()

publicKey = keypair.publicKey // å…¬é’¥
privateKey = keypair.privateKey // ç§é’¥

// é»˜è®¤ç”Ÿæˆå…¬é’¥ 130 ä½å¤ªé•¿ï¼Œå¯ä»¥å‹ç¼©å…¬é’¥åˆ° 66 ä½
const compressedPublicKey = sm2.compressPublicKeyHex(publicKey) // compressedPublicKey å’Œ publicKey ç­‰ä»·
sm2.comparePublicKeyHex(publicKey, compressedPublicKey) // åˆ¤æ–­å…¬é’¥æ˜¯å¦ç­‰ä»·

// è‡ªå®šä¹‰éšæœºæ•°ï¼Œå‚æ•°ä¼šç›´æ¥é€ä¼ ç»™ BigInt æ„é€ å™¨
// æ³¨æ„ï¼šå¼€å‘è€…ä½¿ç”¨è‡ªå®šä¹‰éšæœºæ•°ï¼Œéœ€è¦è‡ªè¡Œç¡®ä¿ä¼ å…¥çš„éšæœºæ•°ç¬¦åˆå¯†ç å­¦å®‰å…¨
let keypair2 = sm2.generateKeyPairHex('123123123123123')

// åˆå§‹åŒ–éšæœºæ•°æ± ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šç”¨åˆ°
await sm2.initRNGPool()

let verifyResult = sm2.verifyPublicKey(publicKey) // éªŒè¯å…¬é’¥
verifyResult = sm2.verifyPublicKey(compressedPublicKey) // éªŒè¯å…¬é’¥
 * @example
// åŠ å¯†è§£å¯†
import { sm2 } from 'jxk'
const cipherMode = 1 // 1 - C1C3C2ï¼Œ0 - C1C2C3ï¼Œé»˜è®¤ä¸º1
// æ”¯æŒä½¿ç”¨ asn1 å¯¹åŠ å¯†ç»“æœè¿›è¡Œç¼–ç ï¼Œåœ¨ options å‚æ•°ä¸­ä¼ å…¥ { asn1: true } å³å¯ï¼Œé»˜è®¤ä¸å¼€å¯
let encryptData = sm2.doEncrypt(msgString, publicKey, cipherMode, { asn1: false }) // åŠ å¯†ç»“æœ

// æ”¯æŒä½¿ç”¨ asn1 å¯¹å¯†æ–‡è¿›è¡Œè§£ç å†è§£å¯†ï¼Œåœ¨ options å‚æ•°ä¸­ä¼ å…¥ { asn1: true } å³å¯ï¼Œé»˜è®¤ä¸å¼€å¯
let decryptData = sm2.doDecrypt(encryptData, privateKey, cipherMode, { asn1: false }) // è§£å¯†ç»“æœ

encryptData = sm2.doEncrypt(msgArray, publicKey, cipherMode) // åŠ å¯†ç»“æœï¼Œè¾“å…¥æ•°ç»„
decryptData = sm2.doDecrypt(encryptData, privateKey, cipherMode, {output: 'array'}) // è§£å¯†ç»“æœï¼Œè¾“å‡ºæ•°ç»„
 * @example
// ç­¾åéªŒç­¾
// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹
let sigValueHex = sm2.doSignature(msg, privateKey) // ç­¾å
let verifyResult = sm2.doVerifySignature(msg, sigValueHex, publicKey) // éªŒç­¾ç»“æœ

// çº¯ç­¾å
let sigValueHex2 = sm2.doSignature(msg, privateKey, {
    pointPool: [sm2.getPoint(), sm2.getPoint(), sm2.getPoint(), sm2.getPoint()], // ä¼ å…¥äº‹å…ˆå·²ç”Ÿæˆå¥½çš„æ¤­åœ†æ›²çº¿ç‚¹ï¼Œå¯åŠ å¿«ç­¾åé€Ÿåº¦
}) // ç­¾å
let verifyResult2 = sm2.doVerifySignature(msg, sigValueHex2, publicKey) // éªŒç­¾ç»“æœ

// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹ + derç¼–è§£ç 
let sigValueHex3 = sm2.doSignature(msg, privateKey, {
    der: true,
}) // ç­¾å
let verifyResult3 = sm2.doVerifySignature(msg, sigValueHex3, publicKey, {
    der: true,
}) // éªŒç­¾ç»“æœ

// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹ + sm3æ‚å‡‘
let sigValueHex4 = sm2.doSignature(msg, privateKey, {
    hash: true,
}) // ç­¾å
let verifyResult4 = sm2.doVerifySignature(msg, sigValueHex4, publicKey, {
    hash: true,
}) // éªŒç­¾ç»“æœ

// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹ + sm3æ‚å‡‘ï¼ˆä¸åšå…¬é’¥æ¨å¯¼ï¼‰
let sigValueHex5 = sm2.doSignature(msg, privateKey, {
    hash: true,
    publicKey, // ä¼ å…¥å…¬é’¥çš„è¯ï¼Œå¯ä»¥å»æ‰sm3æ‚å‡‘ä¸­æ¨å¯¼å…¬é’¥çš„è¿‡ç¨‹ï¼Œé€Ÿåº¦ä¼šæ¯”çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹ + sm3æ‚å‡‘å¿«
})
let verifyResult5 = sm2.doVerifySignature(msg, sigValueHex5, publicKey, {
    hash: true,
    publicKey,
})

// çº¯ç­¾å + ç”Ÿæˆæ¤­åœ†æ›²çº¿ç‚¹ + sm3æ‚å‡‘ + ä¸åšå…¬é’¥æ¨ + æ·»åŠ  userIdï¼ˆé•¿åº¦å°äº 8192ï¼‰
// é»˜è®¤ userId å€¼ä¸º 1234567812345678
let sigValueHex6 = sm2.doSignature(msgString, privateKey, {
    hash: true,
    publicKey,
    userId: 'testUserId',
})
let verifyResult6 = sm2.doVerifySignature(msgString, sigValueHex6, publicKey, {
    hash: true,
    userId: 'testUserId',
})
 * @author xkloveme xkloveme@gmail.com
 * @Date: 2024-08-10 21:53:59
 */
export default SM2</code></pre>
    </article>
</section>






            
        </div>

        <br class="clear" />

        <footer>
            MIT License Â©
            <a href="https://github.com/xkloveme/docdash-extended"
                >xkloveme
                4.0.3</a
            >
            on
            Wed Aug 14 2024 09:49:38 GMT+0000 (Coordinated Universal Time)
        </footer>

        <script>
          prettyPrint();
          function scrollToTop() {
            window.scrollTo({ top: 0, behavior:'smooth' });
          }

          window.onscroll = function () {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
              document.querySelector('.back-to-top').style.display = 'block';
            } else {
              document.querySelector('.back-to-top').style.display = 'none';
            }
          };
        </script>
        <script src="scripts/polyfill.js"></script>
        <script src="scripts/linenumber.js"></script>
        
        <script src="scripts/search.js" defer></script>
        
        
        <script src="scripts/collapse.js" defer></script>
        
        
    </body>
</html>
